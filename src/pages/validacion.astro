---
import LayoutBasic from '../layouts/LayoutBasic.astro';
import ConfirmacionSeccion from '../components/confirmacion/ConfirmacionSeccion.jsx';

// Obtener query params
const url = Astro.url;
const receiptId = url.searchParams.get('receipt_id');
const leadId = url.searchParams.get('lead_id');
const method = url.searchParams.get('method'); // 'transfer' o 'stripe'
const status = url.searchParams.get('status'); // 'pending'

// Para validación:
// - Transferencia bancaria: Siempre pending (requiere validación manual del CRM)
// - Stripe académico: También pending (requiere validación de credencial)
const paymentMethod = method || 'transfer';
const paymentStatus = status || 'pending';
const hasData = leadId; // Solo necesitamos leadId (receiptId es opcional)
---

<LayoutBasic 
  title="Registro Recibido - Congreso Nacional de Amparo 2025" 
  showFooter={true}
>
  <ConfirmacionSeccion 
    transition:persist
    client:only="react"
    transactionId={receiptId}
    leadId={leadId}
    paymentMethod={paymentMethod}
    status={paymentStatus}
    hasData={hasData}
  />
</LayoutBasic>
